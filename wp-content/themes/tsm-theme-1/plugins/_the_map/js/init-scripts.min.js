var mapImg={infoBoxClose:"/wp-content/themes/tsm-theme-1/plugins/_the_map/img/map-close-button.png",toolTipArrow:"/wp-content/themes/tsm-theme-1/plugins/_the_map/img/map-tooltip-arrow.png"},smallPluginOptions={showInfoWindow:1,img:mapImg},smallMapMobileOptions={draggable:false,panControl:true};if(jQuery(".b2b-location.small").hasClass("mobile")){smallPluginOptions.mapOptions=smallMapMobileOptions}if(!jQuery("body").hasClass("home")){jQuery(".b2b-location.small.mobile .b2b-location-canvas").show()}jQuery(".b2b-location.wide").googleMapsPlugin({img:mapImg});jQuery(".b2b-location.medium").googleMapsPlugin({img:mapImg});jQuery(".b2b-location.small").googleMapsPlugin({img:mapImg});
// dalbert: Embed map solution
jQuery().ready(function(){
// Find the api key via the js script include
var apiKeys=jQuery("script").filter(function(i,el){var src=jQuery(el).attr("src");return src&&src.indexOf("maps.googleapis.com/maps/api/js?key=")>=0}).map(function(i,el){var src=jQuery(el).attr("src");var match=src.match(/maps\.googleapis\.com\/maps\/api\/js\?key=([^&]+)/);return match.length>=2?match[1]:null});var apiKey=apiKeys.length>0?apiKeys[0]:null;if(apiKey!==null){var isFirst=true;var iframeSrcBase="https://www.google.com/maps/embed/v1/place?key="+encodeURIComponent(apiKey);jQuery(".b2b-location-items ul li[data-iframe-src-query]").each(function(index,el){var clickHandler=function(){var newIframeSrc=iframeSrcBase+jQuery(el).data("iframe-src-query");if(jQuery("iframe.b2b-location-canvas").attr("src")!==newIframeSrc){jQuery("iframe.b2b-location-canvas").attr("src",newIframeSrc)}};jQuery(el).click(clickHandler);if(isFirst){isFirst=false;clickHandler()}})}});